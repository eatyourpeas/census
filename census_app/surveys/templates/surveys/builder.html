{% extends 'base.html' %}
{% block head_theme_overrides %}
  {% if survey.style.theme_css_light or survey.style.theme_css_dark %}
  <style>
    {% if survey.style.theme_css_light %}
    [data-theme="census-light"] {
      {{ survey.style.theme_css_light|safe }}
    }
    {% endif %}
    {% if survey.style.theme_css_dark %}
    [data-theme="census-dark"] {
      {{ survey.style.theme_css_dark|safe }}
    }
    {% endif %}
  </style>
  {% endif %}
  {% if survey.style.font_css_url %}
    <link href="{{ survey.style.font_css_url }}" rel="stylesheet" />
  {% endif %}
{% endblock %}
{% load static %}
{% block title %}Question Group Builder - {{ survey.name }}{% endblock %}
{% block content %}
<div class="flex flex-col gap-6">
  <div class="prose">
    {% include 'components/breadcrumbs.html' with crumb1_label="Survey Dashboard" crumb1_href="/surveys/"|add:survey.slug|add:"/dashboard/" crumb2_label="Question Group Builder" crumb2_href="/surveys/"|add:survey.slug|add:"/builder/" %}
    <h1>Question Group Builder</h1>
    <hr/>
    <h2>{{ survey.name }}</h2>
  </div>

  <div class="grid md:grid-cols-3 gap-6">
    <div class="md:col-span-2">
      <div class="card bg-base-100 shadow">
        <div class="card-body">
          <h2 class="card-title inline-flex items-center gap-2 text-primary">
            {% include "components/icons/document.html" with classes="w-5 h-5 text-primary" %}
            <span>All Questions</span>
          </h2>
          {% include 'surveys/partials/questions_list.html' %}
        </div>
      </div>
    </div>

    <div>
      <div class="card bg-base-100 shadow">
        <div class="card-body">
          <h2 class="card-title">Groups</h2>
          <p class="opacity-80">Create and manage groups, then add questions inside each group.</p>
          <a class="btn btn-primary" href="/surveys/{{ survey.slug }}/groups/">Manage groups</a>
          {% if groups %}
            <div class="divider">Open a group</div>
            <ul class="menu bg-base-100 rounded-box">
              {% for g in groups %}
                <li><a href="/surveys/{{ survey.slug }}/builder/groups/{{ g.id }}/">{{ g.name }}</a></li>
              {% endfor %}
            </ul>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js"></script>
<script src="{% static 'js/builder.js' %}"></script>
{% endblock %}
